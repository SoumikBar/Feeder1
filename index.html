<!DOCTYPE html>
<html>
  <head>
    <title>FeedPaws Volunteer Login</title>
    <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-auth-compat.js"></script>
    <style>
      body {
        font-family: sans-serif;
        padding: 20px;
        background: #f2f2f2;
      }
      input, button {
        display: block;
        margin: 10px 0;
        padding: 10px;
        font-size: 16px;
        width: 100%;
      }
      #admin-section {
        display: none;
        margin-top: 20px;
        padding: 10px;
        border: 2px dashed #888;
        background: #fffbe6;
      }
    </style>
  </head>
  <body>
    <h2>🐾 FeedPaws Volunteer Login</h2>

    <input type="tel" id="phoneNumber" placeholder="+91..." />
    <div id="recaptcha-container"></div>
    <button onclick="sendOTP()">Send OTP</button>

    <input type="text" id="otp" placeholder="Enter OTP" />
    <button onclick="verifyOTP()">Verify OTP</button>

    <input type="password" id="secretCode" placeholder="Enter Admin Secret Code (optional)" />

    <div id="admin-section">
      <h3>🔐 Admin Panel</h3>
      <p>Welcome Admin! You now have access to admin-only features.</p>
    </div>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyBV85q58uQZ2u1QHe3hsEa_vHedi0n6KwE",
        authDomain: "feedpaws-c729b.firebaseapp.com",
        projectId: "feedpaws-c729b",
        storageBucket: "feedpaws-c729b.appspot.com",
        messagingSenderId: "905040374513",
        appId: "1:905040374513:web:5667a5784041d3843b1750",
        measurementId: "G-8ZQCFW1MND"
      };

      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();

      window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
        'size': 'normal',
        'callback': function(response) {
          console.log("Recaptcha verified");
        }
      });

      function sendOTP() {
        const phoneNumber = document.getElementById("phoneNumber").value;
        const appVerifier = window.recaptchaVerifier;

        auth.signInWithPhoneNumber(phoneNumber, appVerifier)
          .then((confirmationResult) => {
            window.confirmationResult = confirmationResult;
            alert("OTP sent!");
          }).catch((error) => {
            alert("Error sending OTP: " + error.message);
          });
      }

      function verifyOTP() {
        const otp = document.getElementById("otp").value;
        const secretCode = document.getElementById("secretCode").value;

        window.confirmationResult.confirm(otp).then((result) => {
          alert("Login successful!");

          if (secretCode === "feedadmin123") {
            document.getElementById("admin-section").style.display = "block";
          } else {
            alert("You’re logged in as Volunteer.");
          }
        }).catch((error) => {
          alert("Invalid OTP!");
        });
      }
    </script>
  </body>
</html>