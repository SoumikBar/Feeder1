<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>FeedPaws Login</title>
    <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-auth-compat.js"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background-color: #f0f0f0;
      }
      input, button {
        margin: 10px 0;
        padding: 10px;
        width: 100%;
        font-size: 16px;
        border: 1px solid #ccc;
        border-radius: 5px;
      }
      #admin-panel {
        margin-top: 20px;
        display: none;
        padding: 15px;
        background: #fff3cd;
        border: 1px solid #ffeeba;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <h2>üêæ FeedPaws Volunteer Login</h2>
    <input type="tel" id="phoneNumber" placeholder="Enter phone (+91...)" />
    <div id="recaptcha-container"></div>
    <button onclick="sendOTP()">Send OTP</button>

    <input type="text" id="otp" placeholder="Enter OTP" />
    <input type="password" id="adminCode" placeholder="Admin Secret Code (optional)" />
    <button onclick="verifyOTP()">Login</button>

    <div id="admin-panel">
      <h3>‚úÖ Admin Access Granted</h3>
      <p>Welcome to the admin panel.</p>
    </div>

    <script>
      // Your Firebase config
      const firebaseConfig = {
        apiKey: "AIzaSyBV85q58uQZ2u1QHe3hsEa_vHedi0n6KwE",
        authDomain: "feedpaws-c729b.firebaseapp.com",
        projectId: "feedpaws-c729b",
        storageBucket: "feedpaws-c729b.appspot.com",
        messagingSenderId: "905040374513",
        appId: "1:905040374513:web:5667a5784041d3843b1750",
        measurementId: "G-8ZQCFW1MND"
      };

      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();

      // Setup invisible Recaptcha
      window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
        size: 'invisible',
        callback: function(response) {
          // CAPTCHA solved
        }
      });

      function sendOTP() {
        const phoneNumber = document.getElementById("phoneNumber").value;
        const appVerifier = window.recaptchaVerifier;

        auth.signInWithPhoneNumber(phoneNumber, appVerifier)
          .then((confirmationResult) => {
            window.confirmationResult = confirmationResult;
            alert("OTP sent!");
          }).catch((error) => {
            alert("Error: " + error.message);
          });
      }

      function verifyOTP() {
        const otp = document.getElementById("otp").value;
        const adminCode = document.getElementById("adminCode").value;

        window.confirmationResult.confirm(otp).then((result) => {
          alert("Login successful!");

          // Check admin code
          if (adminCode === "feedadmin123") {
            document.getElementById("admin-panel").style.display = "block";
          } else {
            alert("Logged in as volunteer.");
          }
        }).catch((error) => {
          alert("OTP verification failed: " + error.message);
        });
      }
    </script>
  </body>
</html>
